<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ro.kepler.kepres.app.dao.DaoFactura">

	<select id="readList" resultType="Factura">
		select * from FACTURA
	</select>
	
	<select id="read" resultType="Factura">
		select * from FACTURA where ID = #{id}
	</select>
	
	<delete id="delete">
		delete from FACTURA where ID  = #{id}
	</delete>
	
	<update id="update" parameterType="Factura">
		update FACTURA
     	set 
     		  SERIE = #{record.serie}
     		, NUMAR = #{record.numar}
     		, DT_EMITERE = #{record.dtEmitere}
     		, DT_SCADENTA = #{record.dtScadenta}
     		, SUMA = #{record.suma}
     		, TVA = #{record.tva}
     		, TOTAL = #{record.total}
     		, DRAFT = #{record.draft}
     		, MEMO = #{record.memo}
		where 
			ID = #{record.id}
   </update>
   
   	<insert id="create" useGeneratedKeys="true" >
		<selectKey keyProperty="record.id" resultType="int" order="BEFORE">
			select SEQ_FACTURA.NEXTVAL from DUAL
		</selectKey>
		insert into FACTURA(ID, SERIE, NUMAR, DTEMITERE, DTSCADENTA, SUMA, TVA, TOTAL, DRAFT, MEMO)
		values (#{record.id}, #{record.serie}, #{record.numar}, to_date(#{record.dtEmitere},'DD.MM.YYYY'), to_date(#{record.dtScadenta},'DD.MM.YYYY'), #{record.suma}, #{record.tva}, #{record.total}, #{record.draft}, #{record.memo})
   </insert>

</mapper>